version: 1
frontend:
  phases:
    preBuild:
      commands:
        - npm ci --cache .npm --prefer-offline
    build:
      commands:
        - npm run build
  artifacts:
    baseDirectory: .next
    files:
      - '**/*'
  cache:
    paths:
      - .next/cache/**/*
      - .npm/**/*
  environment:
    variables:
      OPENAI_API_KEY: "${OPENAI_API_KEY}"
      ANTHROPIC_API_KEY: "${ANTHROPIC_API_KEY}"
      PINECONE_API_KEY: "${PINECONE_API_KEY}"
      PINECONE_INDEX_NAME: "${PINECONE_INDEX_NAME}"
      APP_AWS_REGION: "${APP_AWS_REGION}"
      APP_AWS_ACCESS_KEY_ID: "${APP_AWS_ACCESS_KEY_ID}"
      APP_AWS_SECRET_ACCESS_KEY: "${APP_AWS_SECRET_ACCESS_KEY}"
      APP_AWS_S3_BUCKET_NAME: "${APP_AWS_S3_BUCKET_NAME}"
      VECTOR_STORE: "${VECTOR_STORE}"
      GOOGLE_CLOUD_VISION_KEY: "${GOOGLE_CLOUD_VISION_KEY}"
      USE_RRF: "${USE_RRF}"
      USE_ADVANCED_CHUNKING: "${USE_ADVANCED_CHUNKING}"
      DEBUG_LOGGING: "${DEBUG_LOGGING}"
      CLEAR_NAMESPACE_BEFORE_INSERT: "${CLEAR_NAMESPACE_BEFORE_INSERT}"